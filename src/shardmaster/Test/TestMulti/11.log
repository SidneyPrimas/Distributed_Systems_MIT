Test: Multi-group join/leave ...
2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:0}, Received Reply => {WrongLeader:false Err:OK Config:{Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]}} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:1}, Received Reply => {WrongLeader:false Err:OK Config:{Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]}} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Join completed. Sent Args => &{Servers:map[2:[a b c] 1:[x y z]] ClientID:2012607179272816060 RequestID:2}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:3}, Received Reply => {WrongLeader:false Err:OK Config:{Num:1 Shards:[1 2 2 1 2 1 2 1 1 2] Groups:map[1:[x y z] 2:[a b c]]}} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:4}, Received Reply => {WrongLeader:false Err:OK Config:{Num:1 Shards:[1 2 2 1 2 1 2 1 1 2] Groups:map[1:[x y z] 2:[a b c]]}} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Join completed. Sent Args => &{Servers:map[3:[j k l]] ClientID:2012607179272816060 RequestID:5}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:6}, Received Reply => {WrongLeader:false Err:OK Config:{Num:2 Shards:[3 2 2 3 2 1 2 1 1 3] Groups:map[1:[x y z] 2:[a b c] 3:[j k l]]}} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:7}, Received Reply => {WrongLeader:false Err:OK Config:{Num:2 Shards:[3 2 2 3 2 1 2 1 1 3] Groups:map[3:[j k l] 1:[x y z] 2:[a b c]]}} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Join completed. Sent Args => &{Servers:map[2:[a b c]] ClientID:2012607179272816060 RequestID:8}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:9}, Received Reply => {WrongLeader:false Err:OK Config:{Num:3 Shards:[3 2 2 3 2 1 2 1 1 3] Groups:map[1:[x y z] 2:[a b c] 3:[j k l]]}} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:10}, Received Reply => {WrongLeader:false Err:OK Config:{Num:3 Shards:[3 2 2 3 2 1 2 1 1 3] Groups:map[1:[x y z] 2:[a b c] 3:[j k l]]}} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:11}, Received Reply => {WrongLeader:false Err:OK Config:{Num:3 Shards:[3 2 2 3 2 1 2 1 1 3] Groups:map[1:[x y z] 2:[a b c] 3:[j k l]]}} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Leave completed. Sent Args => &{GIDs:[1 3] ClientID:2012607179272816060 RequestID:12}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:13}, Received Reply => {WrongLeader:false Err:OK Config:{Num:4 Shards:[2 2 2 2 2 2 2 2 2 2] Groups:map[2:[a b c]]}} 

2016/05/06 00:12:54 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:14}, Received Reply => {WrongLeader:false Err:OK Config:{Num:4 Shards:[2 2 2 2 2 2 2 2 2 2] Groups:map[2:[a b c]]}} 

2016/05/06 00:12:55 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:15}, Received Reply => {WrongLeader:false Err:OK Config:{Num:4 Shards:[2 2 2 2 2 2 2 2 2 2] Groups:map[2:[a b c]]}} 

  ... Passed
Test: Concurrent multi leave/join ...
2016/05/06 00:12:55 masterClient4071685246240964491, Action: Join completed. Sent Args => &{Servers:map[4:[a b c] 1004:[a b c] 2004:[a b c]] ClientID:4071685246240964491 RequestID:0}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient2438949712847535875, Action: Join completed. Sent Args => &{Servers:map[3:[a b c] 1003:[a b c] 2003:[a b c]] ClientID:2438949712847535875 RequestID:0}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient146863463116309066, Action: Join completed. Sent Args => &{Servers:map[10:[a b c] 1010:[a b c] 2010:[a b c]] ClientID:146863463116309066 RequestID:0}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient194218209698982322, Action: Join completed. Sent Args => &{Servers:map[8:[a b c] 1008:[a b c] 2008:[a b c]] ClientID:194218209698982322 RequestID:0}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient3735735549981499715, Action: Join completed. Sent Args => &{Servers:map[2002:[a b c] 2:[a b c] 1002:[a b c]] ClientID:3735735549981499715 RequestID:0}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient241146767003555000, Action: Join completed. Sent Args => &{Servers:map[1:[a b c] 1001:[a b c] 2001:[a b c]] ClientID:241146767003555000 RequestID:0}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient4071685246240964491, Action: Leave completed. Sent Args => &{GIDs:[1004 2004] ClientID:4071685246240964491 RequestID:1}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient2438949712847535875, Action: Leave completed. Sent Args => &{GIDs:[1003 2003] ClientID:2438949712847535875 RequestID:1}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient3191340923122843103, Action: Join completed. Sent Args => &{Servers:map[1005:[a b c] 2005:[a b c] 5:[a b c]] ClientID:3191340923122843103 RequestID:0}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient3735735549981499715, Action: Leave completed. Sent Args => &{GIDs:[1002 2002] ClientID:3735735549981499715 RequestID:1}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient4543103305775021285, Action: Join completed. Sent Args => &{Servers:map[9:[a b c] 1009:[a b c] 2009:[a b c]] ClientID:4543103305775021285 RequestID:0}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient672346753134401174, Action: Join completed. Sent Args => &{Servers:map[7:[a b c] 1007:[a b c] 2007:[a b c]] ClientID:672346753134401174 RequestID:0}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient194218209698982322, Action: Leave completed. Sent Args => &{GIDs:[1008 2008] ClientID:194218209698982322 RequestID:1}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient241146767003555000, Action: Leave completed. Sent Args => &{GIDs:[1001 2001] ClientID:241146767003555000 RequestID:1}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient672346753134401174, Action: Leave completed. Sent Args => &{GIDs:[1007 2007] ClientID:672346753134401174 RequestID:1}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient4543103305775021285, Action: Leave completed. Sent Args => &{GIDs:[1009 2009] ClientID:4543103305775021285 RequestID:1}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient3191340923122843103, Action: Leave completed. Sent Args => &{GIDs:[1005 2005] ClientID:3191340923122843103 RequestID:1}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient146863463116309066, Action: Leave completed. Sent Args => &{GIDs:[1010 2010] ClientID:146863463116309066 RequestID:1}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient813349431519711265, Action: Join completed. Sent Args => &{Servers:map[1006:[a b c] 2006:[a b c] 6:[a b c]] ClientID:813349431519711265 RequestID:0}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient813349431519711265, Action: Leave completed. Sent Args => &{GIDs:[1006 2006] ClientID:813349431519711265 RequestID:1}, Received Reply => {WrongLeader:false Err:OK} 

2016/05/06 00:12:55 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:16}, Received Reply => {WrongLeader:false Err:OK Config:{Num:24 Shards:[7 10 3 8 5 9 4 1 2 6] Groups:map[6:[a b c] 10:[a b c] 1:[a b c] 7:[a b c] 5:[a b c] 3:[a b c] 8:[a b c] 9:[a b c] 4:[a b c] 2:[a b c]]}} 

  ... Passed
Test: Minimal transfers after multijoins ...
2016/05/06 00:12:55 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:17}, Received Reply => {WrongLeader:false Err:OK Config:{Num:24 Shards:[7 8 9 10 3 4 1 5 2 6] Groups:map[3:[a b c] 10:[a b c] 1:[a b c] 6:[a b c] 4:[a b c] 8:[a b c] 5:[a b c] 7:[a b c] 2:[a b c] 9:[a b c]]}} 

2016/05/06 00:12:55 masterClient2012607179272816060, Action: Join completed. Sent Args => &{Servers:map[15:[a b c] 11:[a b c] 12:[a b c] 13:[a b c] 14:[a b c]] ClientID:2012607179272816060 RequestID:18}, Received Reply => {WrongLeader:false Err:OK} 

Test: Minimal transfers after multijoins ...2016/05/06 00:12:55 masterClient2012607179272816060, Action: Query completed. Sent Args => &{Num:-1 ClientID:2012607179272816060 RequestID:19}, Received Reply => {WrongLeader:false Err:OK Config:{Num:25 Shards:[7 10 3 8 5 9 4 1 2 12] Groups:map[3:[a b c] 15:[a b c] 10:[a b c] 2:[a b c] 7:[a b c] 6:[a b c] 8:[a b c] 1:[a b c] 5:[a b c] 13:[a b c] 14:[a b c] 9:[a b c] 4:[a b c] 11:[a b c] 12:[a b c]]}} 

--- FAIL: TestMulti (2.12s)
	test_test.go:351: non-minimal transfer after Join()s
FAIL
exit status 1
FAIL	shardmaster	2.125s
